<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3 Test</title>
		<script type="text/javascript" src="d3/d3.js"></script>
	</head>
	<body>
    <script type="text/javascript">
			//setup
			var xRange = 500;
			var yRange = 500;
			var svg = d3.select("body")
									.append("svg")
									.attr("height", xRange)
									.attr("width", yRange);

			function getData() {
				var dataset = [];
				var numOfDataPoints = 100;
				for (var i = 0; i < numOfDataPoints; i++) {
					var newX = Math.random() * xRange;
					var newY = Math.random() * yRange;
					dataset.push([newX, newY]);
				}
				dataset.sort();
				return dataset;
			}

			dataset = getData();

			circles = svg.selectAll("circle")
										.data(dataset)
										.enter()
										.append("circle")
										.attr("cx", function(d) {
											return d[0];
										})
										.attr("cy", function(d) {
											return d[1];
										})
										.attr("r", 10)
										.attr("fill", "black")
										.attr("stroke", "red")
										.attr("stroke-width", 1);

			var dt = 2000;
			svg.selectAll("circle")
							.transition().duration(dt)
							.attr("r", 60)
							.attr("stroke-width", 20)
							.attr("cx", xRange/2)
							.attr("cy", yRange/2)
							.each("end", function() {
								d3.select(this)
									.transition().duration(dt)
									.attr("r", 10)
									.attr("stroke-width", "1")
									.each("end", function() {
										d3.select(this)
											.transition().duration(dt)
											.attr("fill", "white")
											.attr("stroke-width", 10)
											.attr("stroke", "blue")
											.attr("r", xRange);
									})
							})


    </script>
  </body>
</html>
